machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker pull quay.io/dbrgn/rust-xenial

test:
  override:
    - docker run -v $(pwd):/code quay.io/dbrgn/rust-xenial /bin/bash -c 'cd /code && cargo test'
    - docker run -v $(pwd):/code quay.io/dbrgn/rust-xenial /bin/bash -c 'cd /code && cargo build --release'

general:
  artifacts:
    - "target/release/push_relay"
